(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{681:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前端性能优化指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化指标"}},[s._v("#")]),s._v(" 前端性能优化指标")]),s._v(" "),a("h3",{attrs:{id:"白屏时间-first-paint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#白屏时间-first-paint"}},[s._v("#")]),s._v(" 白屏时间(First Paint)")]),s._v(" "),a("p",[s._v("白屏时间(First Paint)：是指浏览器从响应用户输入网址地址，到浏览器开始显示内容的时间。")]),s._v(" "),a("p",[s._v("影响白屏时间的因素：网络、服务端性能、前端页面结构设计。")]),s._v(" "),a("p",[s._v("白屏时间 = 页面开始展示的时间点 - 开始请求的时间点")]),s._v(" "),a("p",[s._v("计算方法")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("可使用 Performance API 时：白屏时间 = firstPaint - performance.timing.navigationStart;")])]),s._v(" "),a("li",[a("p",[s._v("不可使用 Performance API 时：白屏时间 = firstPaint - pageStartTime;")])])]),s._v(" "),a("h3",{attrs:{id:"首屏时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首屏时间"}},[s._v("#")]),s._v(" 首屏时间")]),s._v(" "),a("p",[s._v("首屏时间(First Contentful Paint)：是指浏览器从响应用户输入网络地址，到首屏内容渲染完成的时间。")]),s._v(" "),a("p",[s._v("首屏时间 = 首屏内容渲染结束时间点 - 开始请求的时间点")]),s._v(" "),a("p",[s._v("计算方法：")]),s._v(" "),a("ol",[a("li",[s._v("首屏模块标签标记法")])]),s._v(" "),a("p",[s._v("适用场景：通常适用于首屏内容不需要通过拉取数据才能生存以及页面不考虑图片等资源加载的情况")]),s._v(" "),a("p",[s._v("在 HTML 文档中对应首屏内容的标签结束位置，使用内联的 JavaScript 代码记录当前时间戳")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("统计首屏内加载最慢的图片的时间")])]),s._v(" "),a("p",[s._v("在一个页面中，图片资源往往是比较后加载完的，因此可以统计首屏加载最慢的图片是否加载完成，加载完了，记录结束时间。")]),s._v(" "),a("p",[s._v("如何知道首屏内哪张图片加载最慢？")]),s._v(" "),a("p",[s._v("我们可以拿到首屏内所有的图片，遍历它们，逐个监听图片标签的 onload 事件，并收集到它们的加载时间，最后比较得到加载时间的最大值。")]),s._v(" "),a("p",[s._v("适用场景：")]),s._v(" "),a("p",[s._v("首屏元素数量固定的页面，比如移动端首屏不论屏幕大小都展示相同数量的内容。")]),s._v(" "),a("p",[s._v("但是对于首屏元素不固定的页面，这种方案并不适用，最典型的就是 PC 端页面，不同屏幕尺寸下展示的首屏内容不同。上述方案便不适用于此场景。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("自定义首屏内容计算法")])]),s._v(" "),a("h3",{attrs:{id:"domcontentloaded-vs-load"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domcontentloaded-vs-load"}},[s._v("#")]),s._v(" DOMContentLoaded vs load")]),s._v(" "),a("p",[s._v("(1) DOMContentLoaded 是指页面元素加载完毕，但是一些资源比如图片还无法看到，但是这个时候页面是可以正常交互的，比如滚动，输入字符等。 jQuery 中经常使用的 $(document).ready() 其实监听的就是 DOMContentLoaded 事件。")]),s._v(" "),a("p",[s._v("(2) load 是指页面上所有的资源（图片，音频，视频等）加载完成。jQuery 中 $(document).load() 监听的是 load 事件。")]),s._v(" "),a("h2",{attrs:{id:"前端性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化"}},[s._v("#")]),s._v(" 前端性能优化")]),s._v(" "),a("h3",{attrs:{id:"网络优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络优化"}},[s._v("#")]),s._v(" 网络优化")]),s._v(" "),a("h4",{attrs:{id:"_1-dns-预解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-dns-预解析"}},[s._v("#")]),s._v(" 1. DNS 预解析")]),s._v(" "),a("p",[s._v("DNS 解析也是需要时间的，可以通过预解析的方式来预先获得域名所对应的 IP。")]),s._v(" "),a("p",[a("code",[s._v('<link rel="dns-prefetch" href="//yuchengkai.cn" />')])]),s._v(" "),a("h4",{attrs:{id:"_2-缓存优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-缓存优化"}},[s._v("#")]),s._v(" 2. 缓存优化")]),s._v(" "),a("p",[s._v("选择合适的缓存策略")]),s._v(" "),a("p",[s._v("浏览器缓存策略分为两种：强缓存和协商缓存")]),s._v(" "),a("h4",{attrs:{id:"_3-使用-http2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-http2-0"}},[s._v("#")]),s._v(" 3. 使用 http2.0")]),s._v(" "),a("h4",{attrs:{id:"_4-cdn-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-cdn-优化"}},[s._v("#")]),s._v(" 4. CDN 优化")]),s._v(" "),a("p",[s._v("静态资源使用 CDN")]),s._v(" "),a("p",[s._v("CDN 就是，内容分发网络，它是一组分布在多个不同地理位置的 Web 服务器。我们都知道，当服务器离用户越远时，延迟越高。CDN 就是为了解决这一问题，在多个位置部署服务器，让用户离服务器更近，从而缩短请求时间。")]),s._v(" "),a("h3",{attrs:{id:"代码文件优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码文件优化"}},[s._v("#")]),s._v(" 代码文件优化")]),s._v(" "),a("h4",{attrs:{id:"_1-图片优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-图片优化"}},[s._v("#")]),s._v(" 1. 图片优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("图片懒加载")])]),s._v(" "),a("li",[a("p",[s._v("雪碧图")])]),s._v(" "),a("li",[a("p",[s._v("使用正确的图片格式，小图使用 base64 格式")])]),s._v(" "),a("li",[a("p",[s._v("使用 css3、svg、字体图标代替可替代图片")])]),s._v(" "),a("li",[a("p",[s._v("避免图片使用空 src")])])]),s._v(" "),a("h4",{attrs:{id:"_2-css-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-css-优化"}},[s._v("#")]),s._v(" 2. CSS 优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("文件顺序：CSS 文件放在 head 中")])]),s._v(" "),a("li",[a("p",[s._v("减少使用 CSS 表达式")])]),s._v(" "),a("li",[a("p",[s._v("主要 CSS 属性书写顺序，减少重绘回流，css 语义合并")])]),s._v(" "),a("li",[a("p",[s._v("对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。")])])]),s._v(" "),a("h4",{attrs:{id:"_3-js-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-js-优化"}},[s._v("#")]),s._v(" 3. JS 优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("文件顺序：将 script 标签放在 body 底部")])]),s._v(" "),a("li",[a("p",[s._v("减少 JS 阻塞，利用 async 和 defer")])]),s._v(" "),a("li",[a("p",[s._v("减少 dom 节点的操作，创建一个 documentFragment，在它上面应用所有 DOM 操作，最后再把它添加到文档中。")])]),s._v(" "),a("li",[a("p",[s._v("避免频繁操作样式，最好一次性重写 style 属性或者将样式列表定义为 class 并一次性更改 class 属性。")])]),s._v(" "),a("li",[a("p",[s._v("避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。")])]),s._v(" "),a("li",[a("p",[s._v("事件委托，避免批量绑定事件")])]),s._v(" "),a("li",[a("p",[s._v("使用 requestAnimationFrame 代替 setInterval 实现动画")])])]),s._v(" "),a("h4",{attrs:{id:"_4-其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-其它"}},[s._v("#")]),s._v(" 4. 其它")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("webpack 开启 Gzip 压缩结合服务器端 GZIP 压缩")])]),s._v(" "),a("li",[a("p",[s._v("资源压缩，js 压缩、css 压缩、图片压缩")])]),s._v(" "),a("li",[a("p",[s._v("交互优化：防抖节流")])]),s._v(" "),a("li",[a("p",[s._v("长列表优化：上拉加载，虚拟列表")])]),s._v(" "),a("li",[a("p",[s._v("开启 GPU 渲染加速")])])]),s._v(" "),a("h3",{attrs:{id:"webpack-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-优化"}},[s._v("#")]),s._v(" webpack 优化")]),s._v(" "),a("h4",{attrs:{id:"构建优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建优化"}},[s._v("#")]),s._v(" 构建优化")]),s._v(" "),a("ol",[a("li",[s._v("合并 CSS 和 JS 文件，减少请求数")])]),s._v(" "),a("h4",{attrs:{id:"包体积优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包体积优化"}},[s._v("#")]),s._v(" 包体积优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("webpack Gzip 压缩")])]),s._v(" "),a("li",[a("p",[s._v("打包压缩，清除无用代码以及 console.log")])]),s._v(" "),a("li",[a("p",[s._v("第三方库和工具的按需加载")])]),s._v(" "),a("li",[a("p",[s._v("选择更优的工具 day.js 代替 moment")])])]),s._v(" "),a("h4",{attrs:{id:"性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[s._v("#")]),s._v(" 性能优化")]),s._v(" "),a("ul",[a("li",[s._v("小图标整合成雪碧图")]),s._v(" "),a("li",[s._v("图片懒加载：页面开始加载时放一张占位图，页面加载完毕，再去请求图片")]),s._v(" "),a("li",[s._v("小图标全部换成 svg 图片")]),s._v(" "),a("li",[s._v("所有大图，全部优化缩小")]),s._v(" "),a("li",[s._v("css：减少@import 导入式(同步加载)，尽量使用 link 导入(异步加载)")]),s._v(" "),a("li",[s._v("减少回流重绘")]),s._v(" "),a("li",[s._v("减少 http 请求数量")]),s._v(" "),a("li",[s._v("减少资源大小")]),s._v(" "),a("li",[s._v("部分依赖包换成 CDN 静态资源(eg: vue, vue-router, vant 等)")]),s._v(" "),a("li",[s._v("使用 DNS 预解析")]),s._v(" "),a("li",[s._v("开启 gzip 压缩(nginx 配置)")]),s._v(" "),a("li",[s._v("webpack 配置优化")]),s._v(" "),a("li",[s._v("减少对 DOM 的操作(eg: ref)")]),s._v(" "),a("li",[s._v("减少重定向的使用")]),s._v(" "),a("li",[s._v("缓存：强缓存 & 协商缓存")])]),s._v(" "),a("h4",{attrs:{id:"图片过多优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片过多优化"}},[s._v("#")]),s._v(" 图片过多优化")]),s._v(" "),a("ul",[a("li",[s._v("1.将图片服务和应用服务分离(从架构师的角度思考)")])]),s._v(" "),a("blockquote",[a("p",[s._v("部署单独的图片服务器，减少应用服务器 IO 请求")])]),s._v(" "),a("ul",[a("li",[s._v("2.图片压缩")])]),s._v(" "),a("blockquote",[a("p",[s._v("第三方工具压缩："),a("a",{attrs:{href:"https://tinypng.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://tinypng.com/"),a("OutboundLink")],1)])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("3.图片懒加载")])]),s._v(" "),a("li",[a("p",[s._v("4.css Sprites css 雪碧图")])])]),s._v(" "),a("ul",[a("li",[s._v("5.将小图片压缩成 base64 格式来节约请求")])]),s._v(" "),a("blockquote",[a("p",[s._v("参考："),a("a",{attrs:{href:"https://www.cnblogs.com/zytrue/p/8567795.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/zytrue/p/8567795.html"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"优化工具-webpack-bundle-analyzer-打包分析工具-分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化工具-webpack-bundle-analyzer-打包分析工具-分析"}},[s._v("#")]),s._v(" 优化工具 webpack-bundle-analyzer(打包分析工具)分析")]),s._v(" "),a("ul",[a("li",[s._v("安装："),a("code",[s._v("npm install webpack-bundle-analyzer -D")])])]),s._v(" "),a("blockquote",[a("p",[s._v("依赖(加判断时)："),a("code",[s._v("npm install cross-env -D")])])]),s._v(" "),a("ul",[a("li",[s._v("使用")])]),s._v(" "),a("blockquote",[a("p",[s._v("vue.config.js")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("configureWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_analyzer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" BundleAnalyzerPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-bundle-analyzer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BundleAnalyzerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BundleAnalyzerPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("package.json 添加 analyzer 脚本")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env use_analyzer=true npm run build:prod"')]),s._v(",\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("运行："),a("code",[s._v("npm run analyzer")])])]),s._v(" "),a("li",[a("p",[s._v("属性")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BundleAnalyzerPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义属性")]),s._v("\n\n  analyzerMode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'server'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以是server，static，json，disabled。在server模式下，分析器将启动HTTP服务器来显示软件包报告。在“静态”模式下，会生成带有报告的单个HTML文件。在disabled模式下，你可以使用这个插件来将generateStatsFile设置为true来生成Webpack Stats JSON文件。")]),s._v("\n  analyzerHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将在“服务器”模式下使用的端口启动HTTP服务器。")]),s._v("\n  analyzerPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 端口号。")]),s._v("\n  reportFilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'report.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 路径捆绑，将在static模式下生成的报告文件。相对于捆绑输出目录。")]),s._v("\n  defaultSizes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'parsed'")]),s._v("，"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认显示在报告中的模块大小匹配方式。应该是stat，parsed或者gzip中的一个。")]),s._v("\n  openAnalyzer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在默认浏览器中自动打开报告。")]),s._v("\n  generateStatsFile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果为true，则Webpack Stats JSON文件将在bundle输出目录中生成。")]),s._v("\n  statsFilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stats.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  相对于捆绑输出目录。")]),s._v("\n  statsOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// stats.toJson()方法的选项。例如，您可以使用source：false选项排除统计文件中模块的来源。")]),s._v("\n  logLevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 日志级别，可以是info, warn, error, silent。")]),s._v("\n  excludeAssets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用于排除分析一些文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"lighthouse-评估性能报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lighthouse-评估性能报告"}},[s._v("#")]),s._v(" lighthouse 评估性能报告")]),s._v(" "),a("p",[s._v("安装： "),a("code",[s._v("npm install lighthouse -g")])]),s._v(" "),a("p",[s._v("使用："),a("code",[s._v("lighthouse https://juejin.im/books")])]),s._v(" "),a("h2",{attrs:{id:"vue-首屏优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-首屏优化"}},[s._v("#")]),s._v(" vue 首屏优化")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("CDN 优化，公共库使用 CDN 资源引入")])]),s._v(" "),a("li",[a("p",[s._v("UI 组件库按需引入")])]),s._v(" "),a("li",[a("p",[s._v("路由懒加载：把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件")])]),s._v(" "),a("li",[a("p",[s._v("使用更轻量级的工具库，例如：moment 改成 dayjs")])]),s._v(" "),a("li",[a("p",[s._v("vue-cli3 关闭预加载，设置完毕后，首屏就只会加载当前页面路由的组件")])]),s._v(" "),a("li",[a("p",[s._v("Vue 项目前端配置 GZIP 压缩")])])]),s._v(" "),a("h2",{attrs:{id:"前端优化详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端优化详解"}},[s._v("#")]),s._v(" 前端优化详解")]),s._v(" "),a("h3",{attrs:{id:"长列表优化-虚拟列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#长列表优化-虚拟列表"}},[s._v("#")]),s._v(" 长列表优化-虚拟列表")]),s._v(" "),a("p",[s._v("原因：上拉加载就是一般常见的触底加载，滚动到页面底部加载更多数据，但是当数据量上来之后，达到千万数量级别，浏览器没法承载这么多的节点渲染，肯定会卡顿甚至崩溃，这个时候就可以使用虚拟列表，通过计算滚动视窗，每次只渲染可见屏幕部分节点，超出屏幕的不可见范围用内填充 padding 代替，对于浏览器来说无论你滚动到什么位置，渲染的都是屏幕范围内的节点，这样就不会有性能负担了。")]),s._v(" "),a("p",[s._v("概念：虚拟列表其实是按需显示的一种实现，即只对可见区域进行渲染，对非可见区域中的数据不渲染或部分渲染的技术，从而达到极高的渲染性能。")]),s._v(" "),a("p",[s._v("实现：虚拟列表的实现，实际上就是在首屏加载的时候，只加载可视区域内需要的列表项，当滚动发生时，动态通过计算获得可视区域内的列表项，并将非可视区域内存在的列表项删除。")]),s._v(" "),a("h3",{attrs:{id:"gzip-压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-压缩"}},[s._v("#")]),s._v(" GZIP 压缩")]),s._v(" "),a("p",[a("strong",[a("em",[s._v("Gzip 是万能的吗")])])]),s._v(" "),a("p",[s._v("首先要承认 Gzip 是高效的，压缩后通常能帮我们减少响应 70% 左右的大小。")]),s._v(" "),a("p",[s._v("但它并非万能。Gzip 并不保证针对每一个文件的压缩都会使其变小。")]),s._v(" "),a("p",[s._v("Gzip 压缩背后的原理，是在一个文本文件中找出一些重复出现的字符串、临时替换它们，从而使整个文件变小。根据这个原理，文件中代码的重复率越高，那么压缩的效率就越高，使用 Gzip 的收益也就越大。反之亦然。")]),s._v(" "),a("p",[a("strong",[a("em",[s._v("webpack 的 Gzip 和服务端的 Gzip")])])]),s._v(" "),a("p",[s._v("一般来说，Gzip 压缩是服务器的活儿：服务器了解到我们这边有一个 Gzip 压缩的需求，它会启动自己的 CPU 去为我们完成这个任务。而压缩文件这个过程本身是需要耗费时间的，大家可以理解为我们以服务器压缩的时间开销和 CPU 开销（以及浏览器解析压缩文件的开销）为代价，省下了一些传输过程中的时间开销。")]),s._v(" "),a("p",[s._v("既然存在着这样的交换，那么就要求我们学会权衡。服务器的 CPU 性能不是无限的，如果存在大量的压缩需求，服务器也扛不住的。服务器一旦因此慢下来了，用户还是要等。Webpack 中 Gzip 压缩操作的存在，事实上就是为了在构建过程中去做一部分服务器的工作，为服务器分压。")]),s._v(" "),a("p",[s._v("因此，这两个地方的 Gzip 压缩，谁也不能替代谁。它们必须和平共处，好好合作。作为开发者，我们也应该结合业务压力的实际强度情况，去做好这其中的权衡。")])])}),[],!1,null,null,null);t.default=e.exports}}]);