(window.webpackJsonp=window.webpackJsonp||[]).push([[267],{802:function(a,v,s){"use strict";s.r(v);var t=s(14),_=Object(t.a)({},(function(){var a=this,v=a.$createElement,s=a._self._c||v;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"canvas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas"}},[a._v("#")]),a._v(" Canvas")]),a._v(" "),s("h3",{attrs:{id:"canvas-优缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas-优缺点"}},[a._v("#")]),a._v(" canvas 优缺点")]),a._v(" "),s("p",[a._v("优点：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("Canvas 能够以.png 或者.jpg 格式保存结果图像")])]),a._v(" "),s("li",[s("p",[a._v("Canvas 最适合图像密集型的游戏")])])]),a._v(" "),s("p",[a._v("缺点：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("Canvas 依赖分辨率")])]),a._v(" "),s("li",[s("p",[a._v("Canvas 不支持事件处理")])]),a._v(" "),s("li",[s("p",[a._v("Canvas 弱文本渲染能力")])])]),a._v(" "),s("h3",{attrs:{id:"局部重绘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#局部重绘"}},[a._v("#")]),a._v(" 局部重绘")]),a._v(" "),s("p",[a._v("Canvas 局部刷新的方案：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("清除指定区域的颜色，并设置 clip")])]),a._v(" "),s("li",[s("p",[a._v("所有同这个区域相交的图形重新绘制")])])]),a._v(" "),s("p",[a._v("要实现局部渲染时，需要考虑的两个因素是：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("单次刷新时影响的范围最小")])]),a._v(" "),s("li",[s("p",[a._v("刷新的图形不会影响其他图形的正确绘制")])])]),a._v(" "),s("h2",{attrs:{id:"canvas-相关问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas-相关问题"}},[a._v("#")]),a._v(" canvas 相关问题")]),a._v(" "),s("h3",{attrs:{id:"canvas-和-svg-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas-和-svg-的区别"}},[a._v("#")]),a._v(" Canvas 和 SVG 的区别")]),a._v(" "),s("ol",[s("li",[a._v("绘制方式不同")])]),a._v(" "),s("p",[a._v("canvas 通过 js 来绘制 2D 图形，svg 使用 xml 来描述 2D 图形")]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[a._v("canvas 绘画出来的图形一般成为位图，也就是放大缩小的情况下会出现失真的情况，svg 绘制的图形是矢量图，不存在失真的情况")])]),a._v(" "),s("li",[s("p",[a._v("canvas 绘制的图形不会出现在 DOM 结构中，svg 绘制的会存在于 DOM 结构")])]),a._v(" "),s("li",[s("p",[a._v("canvas 不支持事件处理器，svg 支持事件处理器")])]),a._v(" "),s("li",[s("p",[a._v("canvas 的文本渲染能力弱，svg 中的文字独立于图像，文字可保留，可编辑和可搜索")])]),a._v(" "),s("li",[s("p",[a._v("canvas 依赖于分辨率，svg 不依赖分辨率")])]),a._v(" "),s("li",[s("p",[a._v("canvas 绘制的图形可以多种格式 (jpg、png) 保存图片，但是 svg 绘制的只能以 .svg 格式保存，使用时可以引入 html 文件。")])]),a._v(" "),s("li",[s("p",[a._v("适用场景不同")])])]),a._v(" "),s("p",[a._v("canvas 最适合图像密集型的游戏，其中的许多对象会被频繁重绘，svg 不适合游戏应用")]),a._v(" "),s("h3",{attrs:{id:"canvas-图片跨域问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas-图片跨域问题"}},[a._v("#")]),a._v(" canvas 图片跨域问题")]),a._v(" "),s("p",[a._v("问题描述：正常情况下，如果需要将绘制好的图像输出，我们可以调用 canvas 的 toBlob(), toDataURL() 或 getImageData() 方法来获取到图像数据。然而，会遇到图片跨域的问题")]),a._v(" "),s("p",[a._v("原因：为避免未经许可拉取远程网站信息而导致的用户隐私泄露（如 GPS 等信息，具体可搜索 Exif），在调用 canvas 的 toBlob(), toDataURL() 或 getImageData() 会抛出安全错误:")]),a._v(" "),s("p",[a._v("解决方案：")]),a._v(" "),s("p",[a._v("使用 canvas.toDataUrl 跨域的解决方式就是在设置 "),s("code",[a._v('img.crossOrigin = "Anonymous"')]),a._v("; 方法。")]),a._v(" "),s("p",[a._v("然后在服务器端设置请求头"),s("code",[a._v('"Access-Control-Allow-Origin": "*"')]),a._v("。")]),a._v(" "),s("p",[a._v("crossOrigin 兼容性：IE11+(IE Edge)，Safari，Chrome，Firefox 浏览器均支持，IE9 和 IE10 会报 SecurityError 安全错误")]),a._v(" "),s("p",[a._v("参考："),s("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2018/02/crossorigin-canvas-getimagedata-cors/",target:"_blank",rel:"noopener noreferrer"}},[a._v("解决 canvas 图片 getImageData,toDataURL 跨域问题"),s("OutboundLink")],1)])])}),[],!1,null,null,null);v.default=_.exports}}]);